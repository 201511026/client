<!doctype html>
<html lang="kor">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<title>findpassword</title>

		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
		<link rel="stylesheet" href="css/styles.css">
	</head>

	<body>
		<br />
		<div class="container-fluid">
			<div class="row mp-title-space">
				<div class="col">
					<a class="btn btn-danger btn-block" href="findID.html" role="button">아이디 찾기</a>
				</div>
				<div class="col">
					<a class="btn btn-danger btn-block" href="findpassword.html" role="button">패스워드 찾기</a>
				</div>
			</div>
			<br /><br /><br /><br /><br />
			<form>
				<div class="form-group row lp-btn-upperspace">
					<div class="col">
						<input type="email" class="form-control" id="InputEmail4" placeholder="이메일을 입력해 주세요" required>
					</div>
				</div>
				<div class="form-group row">
					<div class="col" id="result_div">
						<input type="number" class="form-control" id="InputPhoneNum4" placeholder="휴대폰 번호를 입력해 주세요" required>
					</div>
				</div>
				<div class="row">
					<div class="col"></div>
					<div class="col-6" id="result_btn">
						<button id="btn_findpassword" type="submit" class="btn btn-danger btn-block">PW 찾기</button>
					</div>
					<div class="col"></div>
				</div>
			</form>
		</div>

		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
		<script>
			/*
			$("#btn_findpassword").click(function(){
				var email = $("#InputEmail4").val();
				var phoneNumber = $("#InputPhoneNum4").val();

				alert(email+" "+phoneNumber);
				location.replace("result_findpassword.html");

				jquery.ajax({
					type : "POST",
					url : " ",
					data : {"email" : email, "phoneNumber" : phoneNumber},
					dataType : "JSON",
					success:function(data){
						location.replace("result_findpassword.html");
						//result_findpassword.html페이지에 비밀번호 뿌리기
					}
				});
			});	*/		
			
			$("#btn_findpassword").click(function(){//btn_findpassword버튼을 클릭하면 함수 실행
				var email =$("#InputEmail4").val();
				var phoneNumber = $("#InputPhoneNum4").val();//input박스 안에 쓰는 값.;
				$("#InputEmail4").remove();
				$("#InputPhoneNum4").remove();
				$("#result_div").append("<p class='text-center font-weight-bold'>비밀번호는 "+email+"\n"+phoneNumber+"입니다.</p>");
				//$("#result_div").html("비밀번호는 "+data+"입니다.");
				$("#btn_findpassword").remove();
				$("#result_btn").append("<a class='btn btn-danger btn-block' href='login.html' role='button'>확인</a>");
				//alert(email+" "+ phoneNumber);
				//location.replace("result_findpassword.html");
				
				jQuery.ajax({
					type:"POST",
					url:"", //서버주소
					data:{"email":email, "phoneNumber":phoneNumber}, //{"phoneNumber":phoneNumber}에서 ""안은 서버와 정한 변수명 
					dataType:"JSON",
					success:function(data){
						//1. 서버로부터 data를 받아서
						//1. 입력창을 지우고 아이디텍스트를 넣어줌
						//2. 서버로부터 data를 받으면 페이지 이동 후 
						//2. 이동한 페이지 div에 뿌려줌
						$("#InputEmail4").remove();
						$("#InputPhoneNum4").remove();
						$("#result_div").append("<p class='text-center font-weight-bold'>비밀번호는 "+email+"\n"+phoneNumber+"입니다.</p>");
						$("#btn_findpassword").remove();
						$("#result_btn").append("<a class='btn btn-danger btn-block' href='login.html' role='button'>확인</a>");
						//location.replace("result_findpassword.html");
					},
					error:function(xhr, status, error){ //여기 물어보기
						alert("다시 시도해주세요."); 
					}
				});
			});
			
		</script>
	</body>
</html>